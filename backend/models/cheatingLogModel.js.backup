import mongoose from "mongoose";

// Define a schema for the cheating log
const cheatingLogSchema = new mongoose.Schema(
  {
    // AI Detection Counts
    noFaceCount: { type: Number, default: 0 },
    multipleFaceCount: { type: Number, default: 0 },
    cellPhoneCount: { type: Number, default: 0 },
    prohibitedObjectCount: { type: Number, default: 0 },

    // Browser Security Violations
    tabSwitchCount: { type: Number, default: 0 },
    copyPasteCount: { type: Number, default: 0 },
    rightClickCount: { type: Number, default: 0 },
    printScreenCount: { type: Number, default: 0 },
    devToolsCount: { type: Number, default: 0 },
    fullScreenExitCount: { type: Number, default: 0 },
    windowBlurCount: { type: Number, default: 0 },
    applicationSwitchCount: { type: Number, default: 0 },

    examId: { type: String, required: true },
    email: { type: String, required: true },
    username: { type: String, required: true },

    screenshots: [
      {
        url: { type: String, required: true },
        type: {
          type: String,
          enum: [
            "noFace", 
            "multipleFace", 
            "cellPhone", 
            "prohibitedObject",
            "tabSwitch",
            "copyPaste", 
            "rightClick",
            "printScreen",
            "devTools",
            "fullScreenExit",
            "windowBlur",
            "applicationSwitch"
          ],
          required: true,
        },
        detectedAt: { type: Date, default: Date.now },
      },
    ],
  },
  {
    timestamps: true,
  }
);

// Create a model using the schema
const CheatingLog = mongoose.model("CheatingLog", cheatingLogSchema);

export default CheatingLog;
